# MoneyFlow - Учет доходов и расходов

Веб-приложение для учета личных финансов с возможностью отслеживания доходов и расходов по дням и просмотра статистики за различные периоды.

## Технологии

### Backend
- **FastAPI** - современный веб-фреймворк для Python
- **SQLAlchemy** - ORM для работы с базой данных
- **SQLite** - база данных (по умолчанию)
- **Pydantic** - валидация данных

### Frontend
- **React 18** - библиотека для создания пользовательского интерфейса
- **TypeScript** - типизированный JavaScript
- **Vite** - сборщик и dev-сервер
- **React Router** - маршрутизация
- **Recharts** - библиотека для графиков
- **Tailwind CSS** - утилитарный CSS фреймворк
- **Axios** - HTTP клиент

## Структура проекта

```
MoneyFlow/
├── backend/          # Backend приложение (FastAPI)
│   ├── app/
│   │   ├── api/      # API endpoints
│   │   ├── models/   # Модели базы данных
│   │   ├── schemas/  # Pydantic схемы
│   │   ├── services/ # Бизнес-логика
│   │   └── repositories/ # Доступ к данным
│   └── requirements.txt
│
└── frontend/         # Frontend приложение (React)
    ├── src/
    │   ├── components/  # React компоненты
    │   ├── pages/       # Страницы приложения
    │   ├── hooks/       # React хуки
    │   ├── services/    # API клиент
    │   └── types/       # TypeScript типы
    └── package.json
```

## Установка и запуск

### Backend

1. Перейдите в директорию backend:
```bash
cd backend
```

2. Создайте виртуальное окружение:
```bash
python -m venv venv
```

3. Активируйте виртуальное окружение:
- Windows:
```bash
venv\Scripts\activate
```
- Linux/Mac:
```bash
source venv/bin/activate
```

4. Установите зависимости:
```bash
pip install -r requirements.txt
```

5. Запустите сервер:
```bash
uvicorn app.main:app --reload --port 8000
```

Backend будет доступен по адресу: http://localhost:8000
API документация: http://localhost:8000/docs

### Frontend

1. Перейдите в директорию frontend:
```bash
cd frontend
```

2. Установите зависимости:
```bash
npm install
```

3. Запустите dev-сервер:
```bash
npm run dev
```

Frontend будет доступен по адресу: http://localhost:5173

## Остановка серверов и сохранение данных

### Автоматическое сохранение данных

**Важно:** Все данные автоматически сохраняются в базу данных SQLite (`backend/moneyflow.db`) при каждой операции:
- При создании транзакции
- При обновлении транзакции
- При удалении транзакции

SQLite сохраняет данные на диск сразу после каждого `commit()`, поэтому ваши данные защищены даже при неожиданном завершении работы.

### Способы остановки серверов

#### Способ 1: Использование скрипта (рекомендуется)

Запустите файл `stop_servers.bat` в корне проекта:
```bash
stop_servers.bat
```

Этот скрипт автоматически найдет и остановит оба сервера (backend и frontend).

#### Способ 2: Ручная остановка

1. **Остановка Frontend сервера:**
   - В окне терминала, где запущен frontend, нажмите `Ctrl + C`
   - Или закройте окно терминала

2. **Остановка Backend сервера:**
   - В окне терминала, где запущен backend, нажмите `Ctrl + C`
   - Или закройте окно терминала

#### Способ 3: Через диспетчер задач (Windows)

1. Откройте Диспетчер задач (`Ctrl + Shift + Esc`)
2. Найдите процессы:
   - `python.exe` или `uvicorn.exe` (backend на порту 8000)
   - `node.exe` (frontend на порту 5173)
3. Завершите эти процессы

### Проверка сохраненных данных

После остановки серверов все данные остаются в файле базы данных:
- **Путь:** `backend/moneyflow.db`
- Этот файл можно скопировать для резервного копирования
- При следующем запуске все данные будут доступны

## Функционал

### Управление транзакциями
- ✅ Добавление доходов и расходов
- ✅ Редактирование транзакций
- ✅ Удаление транзакций
- ✅ Просмотр списка транзакций
- ✅ Фильтрация по дате и типу

### Статистика и аналитика
- ✅ Просмотр статистики за день
- ✅ Просмотр статистики за неделю
- ✅ Просмотр статистики за месяц
- ✅ Просмотр статистики за произвольный период
- ✅ Графики доходов и расходов
- ✅ Общий баланс за период

### Дашборд
- ✅ Сводная информация
- ✅ Визуализация данных
- ✅ Быстрый выбор периода

## API Endpoints

### Транзакции
- `GET /api/transactions` - Получить список транзакций
- `GET /api/transactions/{id}` - Получить транзакцию по ID
- `POST /api/transactions` - Создать транзакцию
- `PUT /api/transactions/{id}` - Обновить транзакцию
- `DELETE /api/transactions/{id}` - Удалить транзакцию

### Статистика
- `GET /api/statistics/daily?date=YYYY-MM-DD` - Статистика за день
- `GET /api/statistics/weekly?date=YYYY-MM-DD` - Статистика за неделю
- `GET /api/statistics/monthly?date=YYYY-MM-DD` - Статистика за месяц
- `GET /api/statistics/period?start_date=YYYY-MM-DD&end_date=YYYY-MM-DD` - Статистика за период
- `GET /api/statistics/summary` - Общая сводка

## Лицензия

MIT

